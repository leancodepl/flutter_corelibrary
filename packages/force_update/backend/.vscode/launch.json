{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Attach to Api",
      "type": "coreclr",
      "request": "attach",
      "processId": "${input:exampleapp_api_pid}",
      "sourceFileMap": {
        "/home/app/code": "${workspaceFolder}"
      },
      "pipeTransport": {
        "pipeCwd": "${workspaceFolder}",
        "pipeProgram": "kubectl",
        "quoteArgs": false,
        "pipeArgs": [
          "exec -i -n exampleapp-dev --context k3d-exampleapp deployment/exampleapp-api --"
        ],
        "debuggerPath": "/vsdbg/vsdbg"
      },
      "justMyCode": false
    },
    {
      "name": "Attach to Integration tests",
      "type": "coreclr",
      "request": "attach",
      "processId": "${input:exampleapp_tests_pid}",
      "sourceFileMap": {
        "/home/app/code": "${workspaceFolder}"
      },
      "requireExactSource": false,
      "justMyCode": false,
      "pipeTransport": {
        "pipeCwd": "${workspaceFolder}",
        "pipeProgram": "kubectl",
        "quoteArgs": false,
        "pipeArgs": [
          "exec -i -n exampleapp-dev --context k3d-exampleapp pod/exampleapp-integration-tests --"
        ],
        "debuggerPath": "/vsdbg/vsdbg"
      }
    }
  ],
  "inputs": [
    {
      "id": "exampleapp_api_pid",
      "type": "command",
      "command": "shellCommand.execute",
      "args": {
        "command": "dev/tools/getpid.sh",
        "fieldSeparator": "|",
        "description": "Select the process to attach to",
        "env": {
          "K8S_CONTEXT": "k3d-exampleapp",
          "K8S_NS": "exampleapp-dev",
          "WORKLOAD": "deployment/exampleapp-api",
          "FILTER": "ExampleApp.Api",
          "HOME": "${env:HOME}",
          "PATH": "${env:PATH}"
        }
      }
    },
    {
      "id": "exampleapp_tests_pid",
      "type": "command",
      "command": "shellCommand.execute",
      "args": {
        "command": "dev/tools/getpid.sh",
        "fieldSeparator": "|",
        "description": "Select the process to attach to",
        "env": {
          "K8S_CONTEXT": "k3d-exampleapp",
          "K8S_NS": "exampleapp-dev",
          "WORKLOAD": "pod/exampleapp-integration-tests",
          "FILTER": "ExampleApp.IntegrationTests.runtimeconfig.json",
          "HOME": "${env:HOME}",
          "PATH": "${env:PATH}"
        }
      }
    }
  ]
}
